input {
  stdin { }
	tcp {
        mode => "server"
        host => "127.0.0.1"
		port => 5999
		type => "LOG4JEvent"
   }
  file {
    path => "C:\Users\sxiang\dev\surveyor-qa\logs\logstash\qaauto.log"
	start_position => "beginning"
  }
}

filter {
 grok {
		#patterns_dir => ["./patterns"]
		match => { "message" => "%{GREEDYDATA:msg_time} \- %{LOGLEVEL:msg_level} \[%{NOTSPACE:test_run} %{NOTSPACE:test_category} %{NOTSPACE:test_enviroment} %{NOTSPACE:test_url} %{NOTSPACE:test_class} %{NOTSPACE:test_method} %{NOTSPACE:msg_class} %{NOTSPACE:msg_method} %{INT:msg_line}\]\:( _%{NOTSPACE:test_status}_)? %{GREEDYDATA:message}" }
		overwrite => [ "message" ]
    }
}

output {
      stdout { codec => rubydebug }
      elasticsearch {
		index => "qaauto-%{[test_run]}"
		document_type => "demo"
	  }
}
